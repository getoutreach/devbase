description: Build a Docker image for a given architecture.
parameters:
  arch:
    type: string
    description: the architecture of the generated Docker image (amd64 | arm64)
    default: amd64
  save:
    type: boolean
    default: true
  script:
    type: string
    description: Script to run to build Docker image
    default: "./scripts/shell-wrapper.sh ci/release/docker.sh"
steps:
  - run:
      name: Build and Push Docker Image
      command: << parameters.script >>
      environment:
        IMAGE_ARCH: << parameters.arch >>
