description: Restore go cache from a standard key to a standard path, then run make dep, optionally save after.
parameters:
  save:
    type: boolean
    default: false
  go_version:
    type: string
    default: unknown
steps:
  - restore_cache:
      keys:
        - v1-go-<< parameters.go_version >>-cache-{{ "{{" }} checksum "go.sum" {{ "}}" }}
        - v1-go-<< parameters.go_version >>-cache
  - run:
      name: Install Golang dependencies
      command: make dep
  - when:
      condition: << parameters.save >>
      steps:
        - save_go_cache:
            go_version: << parameters.go_version >>
